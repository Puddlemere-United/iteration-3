<h1>Your Shopping Cart</h1>

<% if @shopping_cart.errors.any? %>
    <div id="error_explanation">
        <h2>
            <%= pluralize(@shopping_cart.errors.count, "error") %> You must add items to your cart!
        </h2>
        <ul>
            <% @shopping_cart.errors.full_messages.each do |msg| %>
                <li>
                    <%= msg %>
                </li>
                <% end %>
        </ul>
    </div>
    <% end %>

        <table>
            <tr>
                <th>Product</th>
                <th>Price</th>
            </tr>

            <!-- no equal cause no eval needed -->
            <% @shopping_cart.products.each do |product| %>
                <tr>
                    <td>
                        <%= product.title %>
                    </td>
                    <td>
                        <%= product.price %>
                    </td>
                    <td>
                        <%= link_to 'Remove from Cart', delete_product_from_order_path(product),
                                            method: :delete,
                                            data: {confirm: 'Are you sure?'} %>
                    </td>

                </tr>



                <!-- end (do) loop -->
                <% end %>
                    <tr>
                        <th>Order Total </th>
                        <th></th>
                        <th>
                            <%= @shopping_cart.products.sum(:price)%>
                        </th>
                    </tr>

        </table>
        <%= link_to 'Complete Your Order', select_payment_path  %>
            <%= link_to 'Delete Your Order', @shopping_cart, method: :delete %>